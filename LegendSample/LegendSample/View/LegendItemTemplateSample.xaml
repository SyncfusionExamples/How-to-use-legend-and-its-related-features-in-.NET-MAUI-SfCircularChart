<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="LegendSample.View.LegendItemTemplateSample"
             xmlns:chart="clr-namespace:Syncfusion.Maui.Charts;assembly=Syncfusion.Maui.Charts"
             xmlns:local="clr-namespace:LegendSample.ViewModel">

    <Border Stroke="#092748" Padding="{OnPlatform Default=10, Android=7,iOS=7}" 
            StrokeShape="RoundRectangle 10" Margin="{OnPlatform Android=10, Default=25}" StrokeThickness="2">

        <chart:SfCircularChart x:Name="chart">

            <chart:SfCircularChart.BindingContext>
                <local:ViewModel x:Name="viewModel"/>
            </chart:SfCircularChart.BindingContext>

            <chart:SfCircularChart.Resources>
                
                <ResourceDictionary>
                    <local:BrushToColorConverter x:Key="BrushToColor" />
                </ResourceDictionary>
                
                <DataTemplate x:Key="legendTemplate">
                    <StackLayout Orientation="Horizontal" Margin="4">
                        <Rectangle HeightRequest="5" WidthRequest="15" Margin="3" Background="{Binding IconBrush}"/>
                        <Label Text="{Binding Text}" Margin="3" FontSize="12" TextColor="{Binding IconBrush, Converter={StaticResource BrushToColor}}" FontAttributes="Italic" FontFamily="PlaywriteAUSA-VariableFont_wght"/>
                    </StackLayout>
                </DataTemplate>
            </chart:SfCircularChart.Resources>

            <chart:SfCircularChart.Title>
                <Label Text="Biggest exporters of rice worldwide in 2022 (in tons)" Margin="5,0,0,0" 
                       HorizontalOptions="Center" HorizontalTextAlignment="Center" VerticalOptions="Center" 
                       FontSize="{OnPlatform WinUI='18', Android='12', iOS='14', MacCatalyst='18'}" TextColor="#092748"/>
            </chart:SfCircularChart.Title>

            <chart:SfCircularChart.Legend>
                <chart:ChartLegend ItemTemplate="{StaticResource legendTemplate}">
                </chart:ChartLegend>
            </chart:SfCircularChart.Legend>

            <chart:PieSeries ItemsSource="{Binding DataCollection}" 
                             XBindingPath="Country" 
                             YBindingPath="Value"
                             PaletteBrushes="{Binding CustomBrushes}">
            </chart:PieSeries>

        </chart:SfCircularChart>
    </Border>
</ContentPage>